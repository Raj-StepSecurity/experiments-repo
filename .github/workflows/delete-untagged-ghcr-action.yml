name: delete-untagged-ghcr-action
on:
  workflow_dispatch:

permissions:
  packages: write
  contents: read

jobs:
  delete-test:
    runs-on: ubuntu-latest
    steps:
      - name: Harden the runner (Audit all outbound calls)
        uses: step-security/harden-runner@v2
        with:
          egress-policy: audit
          
      - uses: actions/checkout@v5
      - uses: step-security/delete-untagged-ghcr-action@release
        with:
          token: ${{ secrets.PAT_TOKEN }}
          repository_owner: ${{ github.repository_owner }}
          repository: ${{ github.repository }}
          package_name: experiments-repo
          untagged_only: true
          owner_type: user
